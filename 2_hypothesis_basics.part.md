## Part 2

<br/>
<br/>
<br/>
<br/>

### Hypothesis basics

$$$

### Anatomy of a test

<p>`@given` turns a test into a property ...</p>
<!--@exec frag("hc")-->

... that runs a bunch of times with random input ...
<!--@exec frag("hc")-->

... generated by the strategies you give it ...
<!--@exec frag("hc")-->

... and reports minimised failure examples.
<!--@exec frag("hc")-->

$$$NOTES

$$$

### Simple test

```python
<!-- @include code/part2/failtest_additive_inverse_nan.py -->
```

```pytestresult
<!-- @include code/part2/failtest_additive_inverse_nan.out -->
```
<!--@exec frag()-->

$$$NOTES

Fails because `NaN` is not equal to anything.

$$$

### Assume valid input

We can `assume` our input isn't NaN.

```python
<!-- @include code/part2/test_additive_inverse_assume.py -->
```

```pytestresult
<!-- @include code/part2/test_additive_inverse_assume.out -->
```

$$$NOTES

Could also change the strategy.

$$$

### Settings

Let's see what Hypothesis is actually doing.

```python
<!-- @include code/part2/test_additive_inverse_settings.py -->
```

```pytestresult
<!-- @include code/part2/test_additive_inverse_settings.out -->
```

$$$NOTES

$$$

### Minimization

```python
<!-- @include code/part2/failtest_minimization.py -->
```

```pytestresult
<!-- @include code/part2/failtest_minimization.out -->
```
<!--@exec frag("", "1")-->

The example is (usually) the simplest failing input.
<!--@exec frag("", "1")-->

$$$NOTES

What witchcraft is this!?

Minimization filters out the noise of random input.

$$$

### More minimization

```python
<!-- @include code/part2/failtest_minimization_nontrivial.py -->
```

```pytestresult
<!-- @include code/part2/failtest_minimization_nontrivial.out -->
```

Works for more complicated cases as well.

$$$NOTES

Finds local minima.

Not perfect. Sometimes non-minimal data gets through.
